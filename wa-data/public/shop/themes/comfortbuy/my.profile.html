<div class="content">
    <!-- navigation breadcrumbs -->
    <div class="breadcrumbs">
        <a href="{$wa_app_url}">[`Home`]</a> » <a href="{$wa->getUrl('/frontend/my')}">[`My Account`]</a> » <span class="gray">[`My profile`]</span>
    </div>
    
    <div class="info-page menu">{$wa->myNav()}</div>

    <h1>[`My profile`]</h1>
    
    {if $saved}
        <strong><i class="icon16 saved"></i><span style="color: green;">[`Contact information successfully updated!`]</span></strong>
    {/if}
    
	<div style="float:right; width:450px;">
    <form id="my-sizes-custom">
<div class="wa-form"><!-- размеры --><div class="wa-field wa-field-my_sizes"><div class="wa-name">Мои размеры</div><div class="wa-value"><span class="field wa-field-my_sizes-size_top clearfix"><span>Верх</span><select name="size_top"><option value=""></option><option value="40">40</option><option value="42">42</option><option value="44">44</option><option value="46">46</option><option value="48">48</option><option value="50">50</option><option value="52">52</option></select></span><span class="field wa-field-my_sizes-size_low"><span>Низ</span><select name="size_low"><option value=""></option><option value="42">42</option><option value="44">44</option><option value="46">46</option><option value="48">48</option><option value="50">50</option></select></span></div></div><!--/ форма --></div>
    </form>
	
    <form id="fav-style-custom">
<div class="wa-form"><!-- Стиль --><div class="wa-field wa-field-fav_style"><div class="wa-name">Мой любимый стиль одежды</div><div class="wa-value"><p><select name="style[]"><option value=""></option><option value="1">Casual</option><option value="2">Деловой</option><option value="3">Праздничный</option><option value="4">Спортивный</option><option value="5">Классический</option><option value="0">Другое</option></select></p><p><select name="style[]"><option value=""></option><option value="1">Casual</option><option value="2">Деловой</option><option value="3">Праздничный</option><option value="4">Спортивный</option><option value="5">Классический</option><option value="0">Другое</option></select></p><p><select name="style[]"><option value=""></option><option value="1">Casual</option><option value="2">Деловой</option><option value="3">Праздничный</option><option value="4">Спортивный</option><option value="5">Классический</option><option value="0">Другое</option></select></p></div></div><!--/ форма --></div>
    </form>
	
    <form id="fav-color-custom" class="custom-input-form">
<div class="wa-form"><!-- Цвет --><div class="wa-field wa-field-fav_color"><div class="wa-name">Мой любимый цвет</div><div class="wa-value"><p><input type="text" name="color[]" value=""></p><p><input type="text" name="color[]" value=""></p><p><input type="text" name="color[]" value=""></p></div></div><!--/ форма --></div>
    </form>
	
    <form id="my-hobbies-custom">
<div class="wa-form"><!-- Хобби --><div class="wa-field wa-field-hobbies"><div class="wa-name">Мои хобби</div><div class="wa-value"><p><input type="text" name="hobbies[]" value=""></p><p><input type="text" name="hobbies[]" value=""></p><p><input type="text" name="hobbies[]" value=""></p></div></div><!--/ форма --></div>
    </form>
	
    <form id="my-pets-custom">
<div class="wa-form"><!-- Питомцы --><div class="wa-field wa-field-pets"><div class="wa-name">Мои питомцы</div><div class="wa-value"><p><input type="text" name="pets[]" value=""></p><p><input type="text" name="pets[]" value=""></p><p><input type="text" name="pets[]" value=""></p></div></div><!--/ форма --></div>
    </form>
	
    <form id="my-heroes-custom">
<div class="wa-form"><!-- Герои --><div class="wa-field wa-field-pets"><div class="wa-name">Мои герои</div><div class="wa-value"><p><input type="text" name="heroes[]" value=""></p><p><input type="text" name="heroes[]" value=""></p><p><input type="text" name="heroes[]" value=""></p></div></div><!--/ форма --></div>
    </form>
	
    <form id="my-clothing-custom">
<div class="wa-form"><!-- Бренды одежды --><div class="wa-field wa-field-cloth_brands"><div class="wa-name">Мои любимые бренды одежды</div><div class="wa-value"><p><input type="text" name="clothing[]" value=""></p><p><input type="text" name="clothing[]" value=""></p><p><input type="text" name="clothing[]" value=""></p></div></div><!--/ форма --></div>
    </form>
	
    <form id="my-shoes-custom">
<div class="wa-form"><!-- Бренды обуви --><div class="wa-field wa-field-shoe_brands"><div class="wa-name">Мои любимые бренды обуви</div><div class="wa-value"><p><input type="text" name="shoes[]" value=""></p><p><input type="text" name="shoes[]" value=""></p><p><input type="text" name="shoes[]" value=""></p></div></div><!--/ форма --></div>
    </form>
	
    <form id="my-selfcare-custom">
<div class="wa-form"><!-- магазины косметики --><div class="wa-field wa-field-cosmetic_shops"><div class="wa-name">Мои любимые магазины косметики</div><div class="wa-value"><p><input type="text" name="selfcare[]" value=""></p><p><input type="text" name="selfcare[]" value=""></p><p><input type="text" name="selfcare[]" value=""></p></div></div><!--/ форма --></div>
    </form>
	
    <form id="my-groceries-custom">
<div class="wa-form"><!-- Магазины продуктов --><div class="wa-field wa-field-grocery_stores"><div class="wa-name">Мои любимые магазины продуктов</div><div class="wa-value"><p><input type="text" name="groceries[]" value=""></p><p><input type="text" name="groceries[]" value=""></p><p><input type="text" name="groceries[]" value=""></p></div></div><!--/ форма --></div>
    </form>
	
    <form id="my-othershops-custom">
<div class="wa-form"><!-- Другие магазины --><div class="wa-field wa-field-other_shops"><div class="wa-name">Другие любимые магазины</div><div class="wa-value"><p><input type="text" name="othershops[0]" value=""></p><p><input type="text" name="othershops[]" value=""></p><p><input type="text" name="othershops[]" value=""></p></div></div><!--/ форма --></div>
    </form>
	
	</div>

    <form action="" method="post">
    <div class="wa-form">
    
        {$form->html()}
    
        <div class="wa-field">
            <div class="wa-value">
                <input type="submit" value="[`Save`]">
            </div>
        </div>
    </div>
    </form>
	
</div>


<script type="text/javascript" src="/wa-content/js/js/jquery.maskedinput.min.js"></script>
<script type="text/javascript">
	$('input[name="profile[phone]"]').mask("+7 (999) 999-9999");
	var custom_fields;
	
	var custom_sizez = $('input[name="profile[my_sizes]"]').val();
	if (custom_sizez.length > 2) {
		var i = 0;
		custom_fields = JSON.parse(custom_sizez);
	    $('form#my-sizes-custom select[name="size_top"]').val(custom_fields.size_top);
	    $('form#my-sizes-custom select[name="size_low"]').val(custom_fields.size_low);
	}
	$('form#my-sizes-custom select').on('change', function(){
		$('input[name="profile[my_sizes]"]').val($('form#my-sizes-custom').serializeJSON());
	});
	
	var custom_stylez = $('input[name="profile[fav_style]"]').val();
	if (custom_stylez.length > 2) {
		var i = 0;
		custom_fields = JSON.parse(custom_stylez);
		custom_fields.style.forEach(function(entry) {
		    $('form#fav-style-custom select:eq(' + i + ')').val(entry);
		    i++;
		});
	}
	$('form#fav-style-custom select').on('change', function(){
		$('input[name="profile[fav_style]"]').val($("form#fav-style-custom :input[value!='']").serializeJSON());
	});
	
	var custom_color = $('input[name="profile[fav_color]"]').val();
	if (custom_color.length > 2) {
		var i = 0;
		custom_fields = JSON.parse(custom_color);
		custom_fields.color.forEach(function(entry) {
		    $('form#fav-color-custom input:eq(' + i + ')').val(entry);
		    i++;
		});
	}
	$('form#fav-color-custom input').on('change', function(){
		$('input[name="profile[fav_color]"]').val($("form#fav-color-custom :input[value!='']").serializeJSON());
	});
		
	var custom_hobbies = $('input[name="profile[hobbies]"]').val();
	if (custom_hobbies.length > 2) {
		var i = 0;
		custom_fields = JSON.parse(custom_hobbies);
		custom_fields.hobbies.forEach(function(entry) {
		    $('form#my-hobbies-custom input:eq(' + i + ')').val(entry);
		    i++;
		});
	}
	$('form#my-hobbies-custom input').on('change', function(){
		$('input[name="profile[hobbies]"]').val($("form#my-hobbies-custom :input[value!='']").serializeJSON());
	});
		
	var custom_pets = $('input[name="profile[pets]"]').val();
	if (custom_pets.length > 2) {
		var i = 0;
		custom_fields = JSON.parse(custom_pets);
		custom_fields.pets.forEach(function(entry) {
		    $('form#my-pets-custom input:eq(' + i + ')').val(entry);
		    i++;
		});
	}
	$('form#my-pets-custom input').on('change', function(){
		$('input[name="profile[pets]"]').val($("form#my-pets-custom :input[value!='']").serializeJSON());
	});
		
	var custom_heroes = $('input[name="profile[heroes]"]').val();
	if (custom_heroes.length > 2) {
		var i = 0;
		custom_fields = JSON.parse(custom_heroes);
		custom_fields.heroes.forEach(function(entry) {
		    $('form#my-heroes-custom input:eq(' + i + ')').val(entry);
		    i++;
		});
	}
	$('form#my-heroes-custom input').on('change', function(){
		$('input[name="profile[heroes]"]').val($("form#my-heroes-custom :input[value!='']").serializeJSON());
	});
		
	var custom_cloths = $('input[name="profile[cloth_brands]"]').val();
	if (custom_cloths.length > 2) {
		var i = 0;
		custom_fields = JSON.parse(custom_cloths);
		custom_fields.clothing.forEach(function(entry) {
		    $('form#my-clothing-custom input:eq(' + i + ')').val(entry);
		    i++;
		});
	}
	$('form#my-clothing-custom input').on('change', function(){
		$('input[name="profile[cloth_brands]"]').val($("form#my-clothing-custom :input[value!='']").serializeJSON());
	});
		
	var custom_shoes = $('input[name="profile[shoe_brands]"]').val();
	if (custom_shoes.length > 2) {
		var i = 0;
		custom_fields = JSON.parse(custom_shoes);
		custom_fields.shoes.forEach(function(entry) {
		    $('form#my-shoes-custom input:eq(' + i + ')').val(entry);
		    i++;
		});
	}
	$('form#my-shoes-custom input').on('change', function(){
		$('input[name="profile[shoe_brands]"]').val($("form#my-shoes-custom :input[value!='']").serializeJSON());
	});
		
	var custom_selfcare = $('input[name="profile[cosmetic_shops]"]').val();
	if (custom_selfcare.length > 2) {
		var i = 0;
		custom_fields = JSON.parse(custom_selfcare);
		custom_fields.selfcare.forEach(function(entry) {
		    $('form#my-selfcare-custom input:eq(' + i + ')').val(entry);
		    i++;
		});
	}
	$('form#my-selfcare-custom input').on('change', function(){
		$('input[name="profile[cosmetic_shops]"]').val($("form#my-selfcare-custom :input[value!='']").serializeJSON());
	});
		
	var custom_groceries = $('input[name="profile[grocery_stores]"]').val();
	if (custom_groceries.length > 2) {
		var i = 0;
		custom_fields = JSON.parse(custom_groceries);
		custom_fields.groceries.forEach(function(entry) {
		    $('form#my-groceries-custom input:eq(' + i + ')').val(entry);
		    i++;
		});
	}
	$('form#my-groceries-custom input').on('change', function(){
		$('input[name="profile[grocery_stores]"]').val($("form#my-groceries-custom :input[value!='']").serializeJSON());
	});
		
	var custom_othershops = $('input[name="profile[other_shops]"]').val();
	if (custom_othershops.length > 2) {
		var i = 0;
		custom_fields = JSON.parse(custom_othershops);
		custom_fields.othershops.forEach(function(entry) {
		    $('form#my-othershops-custom input:eq(' + i + ')').val(entry);
		    i++;
		});
	}
	$('form#my-othershops-custom input').on('change', function(){
		$('input[name="profile[other_shops]"]').val($("form#my-othershops-custom :input[value!='']").serializeJSON());
	});
	
</script>

<script src="/wa-data/public/shop/themes/comfortbuy/jquery.serialize-object.min.js" type="text/javascript">
</script>

<script type="text/javascript">
/*
	$( ".wa-field-my_sizes-size_top" ).addClass('clearfix');
	$( ".wa-field-fav_color, .wa-field-hobbies, .wa-field-pets, .wa-field-cloth_brands, .wa-field-shoe_brands, .wa-field-cosmetic_shops, .wa-field-grocery_stores" ).each(function(){ multiField(this); });	
	$( ".wa-field-fav_style" ).each(function(){ multiSelectField(this); });	
	
	function addField(href) {
		var p = $('p', $(href).parent()).last();
		var input = $('input', p);
		if ($(input).val()=='') {
			input.addClass('wa-error');
			setTimeout(function(){ input.removeClass('wa-error', 200, "easeInBack");},300);
			return false;
		}
		var last_index = -1;
		var fname = $(input).attr('name');
		if (fname.indexOf("][") > -1) {
			last_index = fname.slice(fname.lastIndexOf("][")+2, fname.lastIndexOf("]"));
		}
		
		if (last_index == -1) {
			last_index = 0;
			input.attr('name', fname + '[0]');
		}
		
		last_index++;
		$(p).before($(p).clone());
		input.attr('value', '');
		input.focus();
		fname = $(input).attr('name').slice(0,-3);
		input.attr('name', fname + '[' + last_index + ']');
	}
	
	function addSelectField(href) {
		var p = $('p', $(href).parent()).last();
		var input = $('select', p);
		if ($(input).val()=='') {
			input.addClass('wa-error');
			setTimeout(function(){ input.removeClass('wa-error', 200, "easeInBack");},300);
			return false;
		}
		var last_index = -1;
		var fname = $(input).attr('name');
		if (fname.indexOf("][") > -1) {
			last_index = fname.slice(fname.lastIndexOf("][")+2, fname.lastIndexOf("]"));
		}
		
		if (last_index == -1) {
			last_index = 0;
			input.attr('name', fname + '[0]');
		}
		
		last_index++;
		$(p).before($(p).clone());
		input.attr('value', '');
		input.focus();
		fname = $(input).attr('name').slice(0,-3);
		input.attr('name', fname + '[' + last_index + ']');
	}
	
	function removeField(href) {
		var p = $(href).parent();
		var wa_value = $(p).parent();
		var other_ps = $(p).siblings('p');
		if (other_ps.length == 0) {
			var input = $('input', p);
			input.attr('value', '');
			input.addClass('wa-error');
			setTimeout(function(){ input.removeClass('wa-error', 200, "easeInBack");},300)
			return false;
		}

		p.remove();
		enumerateInputs(wa_value);
	}
	
	function enumerateInputs(wa_value) {
		var i = 0;
		var inputs = $('input', wa_value);
		inputs.each(function(){
			fname = $(this).attr('name').slice(0,-3);
			$(this).attr('name', fname + '[' + i + ']');
			if( $(this).val()=='' ) {
				$(this).parent().remove();
				i--;
			}
			i++;
		})
	}
	
	function multiField(field) {
		var wa_value = $('.wa-value', field).first();
		var inputs = $('input', wa_value);
		var last_input = $('input', wa_value).last();
		
		wa_value.append('<a onclick="addField(this);">добавить поле</a>');

		inputs.each(function(){
			$(this).before('<a style="float:right;" onclick="removeField(this);"><i class="icon-remove"></i></a>')
		});
	}

	function multiSelectField(field) {
		var wa_value = $('.wa-value', field).first();
		var inputs = $('select', wa_value);
		var last_input = $('input', wa_value).last();
		
		wa_value.append('<a onclick="addSelectField(this);">добавить поле</a>');

		inputs.each(function(){
			$(this).before('<a style="float:right;" onclick="removeField(this);"><i class="icon-remove"></i></a>')
		});
	}
	
*/
</script>
